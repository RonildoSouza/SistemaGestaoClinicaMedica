@page "/consultas/{consultaId:guid}/exames/novo"
@page "/consultas/{consultaId:guid}/exames/{id:guid}"
@attribute [Authorize(Roles = "Administrador, Medico")]

@using SistemaGestaoClinicaMedica.Aplicacao.DTO;
@using SistemaGestaoClinicaMedica.Apresentacao.Site.Servicos;
@inherits FormBase<IExamesServico, ExameDTO, Guid>

<HeaderComponent Title="Cadastro de Exame" BackRoute="@AposSalvarRetonarPara" />

<FormComponent Item="_dto" OnValidSubmit="Salvar" SubmitButtonText="Salvar e Imprimir Exame">
    <div class="form-group col-md-12">
        <label for="tipo-exame">Tipo de Exame</label>
        <InputSelect @bind-Value="_tipoDeExameId" class="form-control" id="tipo-exame" required>
            <option value=""></option>
            @foreach (var tipo in _tiposDeExames)
            {
                <option value="@tipo.Id.ToString()">@tipo.Nome</option>
            }
        </InputSelect>
    </div>
    <div class="form-group col-md-12">
        <label for="exame-observacao">Observação</label>
        <InputTextArea @bind-Value="@_dto.Observacao" class="form-control" id="exame-observacao" />
    </div>
</FormComponent>

@code {
    protected override string AposSalvarRetonarPara => $"consultas/{ConsultaId}#exames";
}