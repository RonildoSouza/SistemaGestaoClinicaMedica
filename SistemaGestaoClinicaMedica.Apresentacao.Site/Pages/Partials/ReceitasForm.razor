@using SistemaGestaoClinicaMedica.Aplicacao.DTO;
@using SistemaGestaoClinicaMedica.Apresentacao.Site.Servicos;
@inherits FormBase<IReceitasServico, ReceitaDTO, Guid>
@attribute [Authorize(Roles = "Administrador, Medico")]

<HeaderComponent Title="Cadastro de Receita" />

<FormComponent Item="_dto" OnValidSubmit="Salvar" SubmitButtonText="Salvar e Imprimir Receita">
    <div class="form-group col-md-12">
        <label for="medicamentos">Medicamentos</label>
        <SelectWithSearch Id="medicamentos"
                          Placeholder="Adicione os medicamentos à receita"
                          Items="Medicamentos"
                          IsMultiple="true"
                          Context="ctx">
            <option value="@ctx.Id.ToString()" selected="@(_dto.ReceitaMedicamentos.Any(_ => _.MedicamentoId == ctx.Id && _.Ativo))">@ctx.NomeFabrica</option>
        </SelectWithSearch>
    </div>
    <div class="form-group col-md-12">
        <label for="receita-observacao">Observação</label>
        <InputTextArea @bind-Value="@_dto.Observacao" class="form-control" id="receita-observacao" />
    </div>
</FormComponent>